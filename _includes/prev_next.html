{% comment %}
Prev/Next for Just the Docs pages (Markdown-friendly).
Find siblings with the same parent (or no parent), sorted by nav_order.
{% endcomment %}

{% assign current_parent = page.parent | default: "" %}

{% assign candidates = site.pages
  | where_exp: "p", "p.nav_exclude != true"
%}

{% assign siblings = candidates
  | where_exp: "p", "(p.parent | default: '') == current_parent"
  | sort: "nav_order"
%}

{% assign prev = nil %}
{% assign next = nil %}

{% for p in siblings %}
  {% if p.url == page.url %}
    {% if forloop.index0 > 0 %}
      {% assign prev = siblings[forloop.index0 | minus: 1] %}
    {% endif %}
    {% assign last_index = siblings.size | minus: 1 %}
    {% if forloop.index0 < last_index %}
      {% assign next = siblings[forloop.index0 | plus: 1] %}
    {% endif %}
  {% endif %}
{% endfor %}

{% if prev or next %}
<div class="btn-group" style="margin-top: 2rem;">
  {% if prev %}
    <a class="btn" href="{{ prev.url | relative_url }}">&larr; {{ prev.title }}</a>
  {% endif %}
  {% if next %}
    <a class="btn btn-primary" href="{{ next.url | relative_url }}">{{ next.title }} &rarr;</a>
  {% endif %}
</div>
{% endif %}
