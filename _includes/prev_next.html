{% comment %}
Prev/Next for Just the Docs.
Build a single ordered list: root index + everything under /pages/.
Order by nav_order first, then by title for any without nav_order.
{% endcomment %}

{%- assign docs = site.pages
  | where_exp: "p", "p.nav_exclude != true"
  | where_exp: "p", "p.url == '/' or p.path contains 'pages/'"
-%}

{%- assign with_order = docs | where_exp: "p", "p.nav_order" | sort: "nav_order" -%}
{%- assign without_order = docs | where_exp: "p", "p.nav_order == nil" | sort_natural: "title" -%}
{%- assign ordered = with_order | concat: without_order -%}

{%- assign prev = nil -%}
{%- assign next = nil -%}

{%- for p in ordered -%}
  {%- if p.url == page.url -%}
    {%- if forloop.index0 > 0 -%}
      {%- assign prev = ordered[forloop.index0 | minus: 1] -%}
    {%- endif -%}
    {%- assign last_index = ordered.size | minus: 1 -%}
    {%- if forloop.index0 < last_index -%}
      {%- assign next = ordered[forloop.index0 | plus: 1] -%}
    {%- endif -%}
  {%- endif -%}
{%- endfor -%}

{%- if prev or next -%}
<div class="btn-group" style="margin-top: 2rem;">
  {%- if prev -%}
    <a class="btn" href="{{ prev.url | relative_url }}">&larr; {{ prev.title }}</a>
  {%- endif -%}
  {%- if next -%}
    <a class="btn btn-primary" href="{{ next.url | relative_url }}">{{ next.title }} &rarr;</a>
  {%- endif -%}
</div>
{%- endif -%}
